set_mode:
  name: Set Window Mode
  description: Send a discrete mode command to the Siegenia window.
  fields:
    entity_id:
      selector:
        entity:
          integration: siegenia
          domain: cover
    mode:
      required: true
      example: OPEN
      selector:
        select:
          options:
            - OPEN
            - CLOSE
            - GAP_VENT
            - CLOSE_WO_LOCK
            - STOP_OVER
            - STOP

set_connection:
  name: Update Connection
  description: "Change host/port/protocol or credentials if the device IP changed. Note: passwords in service calls are stored in HA history; prefer the UI when possible."
  fields:
    entity_id:
      selector:
        entity:
          integration: siegenia
    host:
      required: true
      example: 192.168.1.50
      selector:
        text:
    port:
      required: false
      default: 443
      selector:
        number:
          min: 1
          max: 65535
          mode: box
    ws_protocol:
      required: false
      selector:
        select:
          options:
            - wss
            - ws
    username:
      required: false
      selector:
        text:
    password:
      required: false
      selector:
        text:
          type: password

reboot_device:
  name: Reboot Device
  description: Reboot the Siegenia controller.
  fields:
    entity_id:
      selector:
        entity:
          integration: siegenia
          domain: cover

reset_device:
  name: Factory Reset Device
  description: Reset the Siegenia controller to defaults (use with care).
  fields:
    entity_id:
      selector:
        entity:
          integration: siegenia
          domain: cover

renew_cert:
  name: Renew TLS Certificate
  description: Renew the device TLS certificate.
  fields:
    entity_id:
      selector:
        entity:
          integration: siegenia
          domain: cover

sync_clock:
  name: Sync Device Clock
  description: Set the device clock to Home Assistant's current local time. Optionally set the timezone string (POSIX/TZ format).
  fields:
    entity_id:
      selector:
        entity:
          integration: siegenia
          domain: cover
    timezone:
      required: false
      example: CET-1CEST,M3.5.0,M10.5.0/3
      selector:
        text:

timer_start:
  name: Start Timer
  description: Start the device timer with a duration.
  fields:
    entity_id:
      selector:
        entity:
          integration: siegenia
          domain: cover
    duration:
      name: Duration
      description: Duration in minutes or HH:MM format.
      example: 10
      required: true
      selector:
        text:

timer_stop:
  name: Stop Timer
  description: Stop/disable the device timer.
  fields:
    entity_id:
      selector:
        entity:
          integration: siegenia
          domain: cover

timer_set_duration:
  name: Set Timer Duration
  description: Set the device timer duration without changing enabled state.
  fields:
    entity_id:
      selector:
        entity:
          integration: siegenia
          domain: cover
    duration:
      name: Duration
      description: Duration in minutes or HH:MM format.
      example: 10
      required: true
      selector:
        text:

cleanup_devices:
  name: Cleanup Devices
  description: Merge duplicate Siegenia devices (scoped to an entry) and remove empty legacy ones.
  fields:
    entity_id:
      required: false
      selector:
        entity:
          integration: siegenia
